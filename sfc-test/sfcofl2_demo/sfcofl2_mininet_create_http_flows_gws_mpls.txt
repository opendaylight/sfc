# Here you can edit the flows bound to GWs working in MPLS. 

sudo ovs-vsctl set bridge gw1 protocols=OpenFlow10,OpenFlow11,OpenFlow12,OpenFlow13
sudo ovs-vsctl set bridge gw2 protocols=OpenFlow10,OpenFlow11,OpenFlow12,OpenFlow13

# HTTP for each client in GW1 

sudo ovs-ofctl -O OpenFlow13  add-flow gw1 "table=0,priority=10,in_port=3,dl_type=0x0800,nw_proto=6,nw_src=10.0.0.1,actions=push_mpls=0x8847,set_field=100->mpls_label,set_field=00:00:00:00:11:01->eth_dst, output=1"
sudo ovs-ofctl -O Openflow13 add-flow gw1 "table=0,priority=10,in_port=1,mpls,nw_dst=10.0.0.1,actions=pop_mpls=0x000b,set_field:00:00:00:00:01:01->eth_dst,output=3"

# HTTP for each client in GW2

sudo ovs-ofctl -O OpenFlow13 add-flow gw2 "table=0,priority=10,in_port=1,mpls,nw_dst=10.10.0.1,actions=pop_mpls=0x000b,set_field:00:00:00:00:11:01->eth_dst,output=3"
sudo ovs-ofctl  -O OpenFlow13 add-flow gw2 "table=0,priority=10,in_port=3,dl_type=0x0800,nw_proto=6,nw_src=10.10.0.1,actions=push_mpls=0x8847,set_field=200->mpls_label,set_field=00:00:00:00:01:01->eth_dst,output=1"


